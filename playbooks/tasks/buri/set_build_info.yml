---

# Format intended to match that used in aminator for the deault "release" value
- name: Setting build timestamp
  set_fact:
    buri_ami_release_timestamp: "{{ ansible_date_time.year }}{{ ansible_date_time.month }}{{ ansible_date_time.day }}{{ ansible_date_time.hour }}{{ ansible_date_time.minute }}"

# Format intended to match aminator creation_time tags
- name: Setting AMI creation_time string value
  set_fact:
    buri_ami_creation_time: "{{ ansible_date_time.date }} {{ ansible_date_time.time }} {{ ansible_date_time.tz }}"

- name: Setting build name (No Suffix)
  set_fact:
    ami_name: "{{ ami_role }}-{{ ansible_distribution }}-{{ ansible_distribution_release }}-{{ buri_ami_release_timestamp }}"
  when: buri_cluster_name is not defined or buri_cluster_name == ""

- name: Setting build name (With Suffix)
  set_fact:
    ami_name: "{{ ami_role }}-{{ buri_cluster_name }}-{{ ansible_distribution }}-{{ ansible_distribution_release }}-{{ buri_ami_release_timestamp }}"
  when: buri_cluster_name is defined and buri_cluster_name != ""

