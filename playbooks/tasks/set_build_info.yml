---

- name: Setting build timestamp
  set_fact:
    ami_timestamp: "{{ ansible_date_time.date }}-{{ ansible_date_time.hour }}{{ ansible_date_time.minute }}"

- name: Setting build name (No Suffix)
  set_fact:
    ami_name: "{{ ami_role }}-{{ ansible_distribution }}-{{ ansible_distribution_release }}-{{ ami_timestamp }}"
  when: buri_cluster_name is not defined or buri_cluster_name == ""

- name: Setting build name (With Suffix)
  set_fact:
    ami_name: "{{ ami_role }}-{{ buri_cluster_name }}-{{ ansible_distribution }}-{{ ansible_distribution_release }}-{{ ami_timestamp }}"
  when: buri_cluster_name is defined and buri_cluster_name != ""

